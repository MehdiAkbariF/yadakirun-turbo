@use '../../../styles/_variables.scss' as tokens;

// ۱. انیمیشن چرخش (بسیار سریع)
@keyframes spinner-spin-fast {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// ۲. انیمیشن تغییر رنگ (با رنگ‌های هاردکد شده برای تست، بعداً توکن‌ها را جایگزین کنید)
// از ۴ رنگ استفاده می‌کنیم تا تغییر کاملاً محسوس باشد
@keyframes spinner-colors-crazy {
  0% { stroke: tokens.$color-brand-primary; }    // آبی (مثلاً)
  25% { stroke: tokens.$color-brand-accent; }    // نارنجی
  50% { stroke: #10b981; }                       // سبز (رنگ ثابت زدم که مطمئن بشم عوض میشه)
  75% { stroke: #ef4444; }                       // قرمز
  100% { stroke: tokens.$color-brand-primary; }  // برگشت به آبی
}

.spinner {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  position: relative;

  &__svg {
    display: block; // حذف فاصله‌های اضافی
    // چرخش روی کل SVG اعمال می‌شود
    // 0.5s یعنی هر نیم ثانیه یک دور کامل! (خیلی سریع)
    animation: spinner-spin-fast 0.5s linear infinite; 
  }

  &__path {
    fill: none;
    stroke-linecap: round;
    transition: stroke 0.2s ease;
    
    // نکته مهم: Dasharray را اینجا فیکس می‌کنیم تا خط همیشه دیده شود
    // یک خط بلند (75% دایره) که می‌چرخد
    stroke-dasharray: 90, 150; 
    stroke-dashoffset: 0;
  }

  // --- مدیریت رنگ‌ها ---

  // حالت رنگارنگ (Multicolor)
  &--color-multicolor {
    .spinner__path {
      // انیمیشن رنگ روی مسیر (Path) اعمال می‌شود
      // 2s یعنی کل چرخه رنگ‌ها 2 ثانیه طول می‌کشد
      animation: spinner-colors-crazy 2s ease-in-out infinite;
    }
  }

  // حالت‌های تک رنگ
  &--color-primary { .spinner__path { stroke: tokens.$color-brand-primary; } }
  &--color-secondary { .spinner__path { stroke: tokens.$color-text-secondary; } }
  &--color-white { .spinner__path { stroke: #ffffff; } }

  // --- سایزها ---
  &--size-sm { width: 20px; height: 20px; }
  &--size-md { width: 32px; height: 32px; }
  &--size-lg { width: 48px; height: 48px; }
  &--size-xl { width: 64px; height: 64px; }
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}