@use '../../../styles/_variables.scss' as tokens;

.article-row {
  display: flex;
  flex-direction: column; // موبایل: ستونی
  background-color: tokens.$color-bg-surface;
  border-radius: tokens.$radius-xl;
  overflow: hidden;
  border: 1px solid tokens.$color-border-secondary;
  transition: all 0.3s ease;
  text-decoration: none;
  position: relative;
  min-height: 180px; // حداقل ارتفاع مناسب

  // --- دسکتاپ و تبلت ---
  @media (min-width: tokens.$breakpoint-md) {
    flex-direction: row; // افقی
    align-items: stretch;
    height: 200px; // ارتفاع فیکس برای نظم در لیست
  }

  // --- هاور افکت ---
  &:hover {
    border-color: tokens.$color-brand-primary;
    box-shadow: tokens.$shadow-lg;
    transform: translateY(-2px);

    .article-row__image {
      transform: scale(1.05);
    }

    .article-row__cta {
      opacity: 1;
      transform: translateX(0);
    }
  }

  // --- بخش عکس ---
  &__image-wrapper {
    position: relative;
    width: 100%;
    height: 200px; // ارتفاع عکس در موبایل
    overflow: hidden;
    flex-shrink: 0;

    @media (min-width: tokens.$breakpoint-md) {
      width: 280px; // عرض عکس در دسکتاپ
      height: 100%;
    }
  }

  &__image {
    object-fit: fill;
    transition: transform 0.5s ease;
  }

  &__mobile-tag {
    position: absolute;
    top: tokens.$spacing-3;
    right: tokens.$spacing-3;
    background-color: rgba(tokens.$color-brand-primary, 0.9);
    color: tokens.$color-text-on-brand;
    padding: 2px 8px;
    border-radius: tokens.$radius-md;
    font-size: tokens.$font-size-xs;
    font-weight: tokens.$font-weight-bold;
    z-index: 2;
  }

  // --- بخش محتوا ---
  &__content {
    padding: tokens.$spacing-4 tokens.$spacing-5;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    width: 100%;
    justify-content: space-between; // فاصله انداختن بین بالا و پایین
  }

  &__body {
    display: flex;
    flex-direction: column;
    gap: tokens.$spacing-2;
  }

  &__title {
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  &__excerpt {
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    opacity: 0.8;
    margin-top: tokens.$spacing-1;

    @media (max-width: tokens.$breakpoint-sm) {
      display: none; // در موبایل‌های کوچک خلاصه حذف شود تا جا باز شود
    }
  }

  // --- فوتر (پایین کارت) ---
  &__footer {
    display: flex;
    align-items: center;
    justify-content: space-between; // ✅ کلید اصلی: فاصله حداکثری بین متا و دکمه
    margin-top: tokens.$spacing-4;
    padding-top: tokens.$spacing-3;
    border-top: 1px solid dashed tokens.$color-border-secondary;
  }

  // --- گروه متا دیتا (آیکون‌ها) ---
  &__meta-group {
    display: flex;
    align-items: center;
    gap: tokens.$spacing-2;
    flex-wrap: wrap; // اگر فضا کم بود بشکند
  }

  &__meta-item {
    display: flex;
    align-items: center;
    gap: tokens.$spacing-1;
    
    svg {
      opacity: 0.7; // آیکون‌ها کمی کمرنگ‌تر
    }
  }

  &__dot {
    width: 4px;
    height: 4px;
    background-color: tokens.$color-border-primary;
    border-radius: 50%;
  }

  // --- دکمه CTA ---
  &__cta {
    display: flex;
    align-items: center;
    gap: tokens.$spacing-1;
    opacity: 0; // مخفی در حالت عادی (دسکتاپ)
    transform: translateX(10px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap; // جلوگیری از شکستن متن دکمه

    // در موبایل همیشه دیده شود
    @media (max-width: tokens.$breakpoint-md) {
       opacity: 1;
       transform: translateX(0);
    }
  }
}