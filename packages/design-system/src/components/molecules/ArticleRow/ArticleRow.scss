@use '../../../styles/_variables.scss' as tokens;

.article-row {
  display: flex;
  flex-direction: row; // ✅ همیشه افقی (هم موبایل هم دسکتاپ)
  align-items: stretch;
  background-color: tokens.$color-bg-surface;
  border-radius: tokens.$radius-xl;
  overflow: hidden;
  border: 1px solid tokens.$color-border-secondary;
  transition: all 0.3s ease;
  text-decoration: none;
  position: relative;
  padding: 5px;
  
  // حداقل ارتفاع در موبایل کمتر باشد
  min-height: 140px; 

  @media (min-width: tokens.$breakpoint-md) {
    height: 100px; // ارتفاع ثابت دسکتاپ
  }

  &:hover {
    border-color: tokens.$color-brand-primary;
    box-shadow: tokens.$shadow-lg;
    transform: translateY(-2px);

    .article-row__image {
      transform: scale(1.05);
    }

    .article-row__cta {
      opacity: 1;
      transform: translateX(0);
    }
  }

  // --- بخش تصویر ---
  &__image-wrapper {
    position: relative;
    flex-shrink: 0;
    
    // ✅ استایل موبایل: عکس کوچک سمت راست
    width: 70px; 
    height: auto; // ارتفاع خودکار تا کل ارتفاع کارت را بگیرد
    overflow: hidden;

    // ✅ استایل دسکتاپ: عکس بزرگتر
    @media (min-width: tokens.$breakpoint-md) {
      width: 280px;
    }
  }

  &__image {
    object-fit: fill; // استفاده از cover بهتر از fill است
    transition: transform 0.5s ease;
  }

  // تگ روی عکس را در موبایل مخفی می‌کنیم چون الان مثل دسکتاپ متادیتا داریم
  &__mobile-tag {
    display: none; 
  }

  // --- بخش محتوا ---
  &__content {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    width: 100%; // اشغال فضای باقی‌مانده
    justify-content: space-between;
    
    // پدینگ کمتر در موبایل
    padding: tokens.$spacing-3;

    @media (min-width: tokens.$breakpoint-md) {
      padding: tokens.$spacing-4 tokens.$spacing-5;
    }
  }

  &__body {
    display: flex;
    flex-direction: column;
    gap: tokens.$spacing-1;
  }

  &__title {
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2; // در موبایل ۲ خط
    -webkit-box-orient: vertical;
    overflow: hidden;
    font-size: tokens.$font-size-xs; // فونت کمی کوچکتر در موبایل

    @media (min-width: tokens.$breakpoint-md) {
      font-size: tokens.$font-size-base;
    }
  }

  &__excerpt {
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    opacity: 0.8;
    margin-top: tokens.$spacing-1;
    font-size: tokens.$font-size-xs;

    // در موبایل‌های خیلی کوچک (زیر ۳۵۰ پیکسل) شاید بهتر باشد مخفی شود
    @media (max-width: 350px) {
      display: none;
    }
  }

  // --- فوتر (پایین کارت) ---
  &__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: tokens.$spacing-2;
    padding-top: tokens.$spacing-2;
    border-top: 1px solid dashed tokens.$color-border-secondary;

    @media (min-width: tokens.$breakpoint-md) {
      margin-top: tokens.$spacing-4;
      padding-top: tokens.$spacing-3;
    }
  }

  &__meta-group {
    display: flex;
    align-items: center;
    gap: tokens.$spacing-2;
    flex-wrap: wrap;
  }

  &__meta-item {
    display: flex;
    align-items: center;
    gap: 2px; // فاصله کمتر در موبایل
    
    svg {
      width: 12px;
      height: 12px;
      opacity: 0.7;
    }

    @media (min-width: tokens.$breakpoint-md) {
      gap: tokens.$spacing-1;
      svg { width: 14px; height: 14px; }
    }
  }

  &__dot {
    width: 3px;
    height: 3px;
    background-color: tokens.$color-border-primary;
    border-radius: 50%;
  }

  &__cta {
    display: flex;
    align-items: center;
    gap: tokens.$spacing-1;
    opacity: 0;
    transform: translateX(10px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;

    // در موبایل همیشه دیده شود (چون هاور نداریم)
    @media (max-width: tokens.$breakpoint-md) {
       opacity: 1;
       transform: translateX(0);
       
       // در موبایل فقط آیکون فلش باشد تا جا کم نگیرد
       .label { display: none; } 
    }
  }
}